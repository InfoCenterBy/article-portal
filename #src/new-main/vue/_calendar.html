<div class="main-section">
     <div class="section-accent">
          <div class="d-flex flex-row flex-wrap align-items-center justify-content-between">
               <div class="">
                    <span class="ff-pt-serif fs-28">
                         Налоговый календарь
                    </span>
               </div>
               <div class="">
                    <a href="" target="_blank" rel="noopener noreferrer" 
                    class="color-gray-dark d-flex flex-row align-items-center hover-orange">
                         <span>Перейти к налоговому календарю</span>
                         <i class="bi bi-arrow-right ms-2"></i>
                    </a>
               </div>
          </div>
          <div class="mt-4" id="vueCalendar">
               <div class="calendar-wrapper row row-container">
                    <div class="col-xxl-6">
                         <!-- <button @click="testCheck">get current month</button> -->
                         <!-- <div class="">{{currentMonth}}</div> -->
                         <div class="calendar-tabs-wrapper d-flex flex-column">
                              <div class="d-flex flex-row justify-content-around w-100">
                                   <input type="radio" 
                                   name="calendarType" 
                                   id="calendarOrg" 
                                   v-model="typeMode" 
                                   value="calendarOrg" 
                                   v-on:click="this.typeMode = 'calendarOrg'">
                                   <label for="calendarOrg" class="tab-toggle w-100 d-flex justify-content-center">Организациям</label>
                                   <input type="radio" 
                                        name="calendarType" 
                                        id="calendarIP" 
                                        v-model="typeMode" 
                                        value="calendarIP" 
                                        v-on:click="this.typeMode = 'calendarIP'">
                                   <label for="calendarIP" class="tab-toggle w-100 d-flex justify-content-center">ИП</label>
                              </div>
                              <div class="tab-underline-accent"></div>
                              <div class="tab-underline w-100"></div>
                         </div>
                         <v-calendar 
                         borderless 
                         :attributes='attributes'
                         :min-date="minDate"
                         :max-date="maxDate"
                         @dayclick="onDayClick"
                         class="mt-3"
                         ref="calendar"
                         :disabled-dates="disabledDates"
                         locale="ru"
                         :masks="{title:'MMMM', weekdays: 'WW'}"
                         ></v-calendar>
                         <!-- <test-comp @message-updated="updateMessage"></test-comp>
                         <div v-if="messageFromChild">
                              {{ messageFromChild }}
                         </div> -->
                         <!-- <div class="" v-if="selectedDate === null">
                              Ничего не выбрано
                         </div> -->
                         <!-- <div class="" v-if="selectedDate">
                              <div class="" v-if="selectedDate !== null">
                                   {{selectedDate}}
                              </div>
                         </div> -->
                    </div>
                    <div class="col-xxl-6">
                         <strong class="ff-pt-serif fs-24">События в <span v-if="monthTitle">{{monthTitle}}</span> <span v-if="yearTitle">{{yearTitle}}</span> года</strong>
                         <div class="calendar-content mt-3">
                              <strong v-if="everyDayArr.length !== 0" class="ff-pt-serif">Ежедневно</strong>
                              <div class="mt-2"></div>
                              <div class="my-2" v-for="info in everyDayArr">
                                   <div v-if="info.weekend !== true">
                                        <a v-if="info.show === true" class="d-flex calendar-info-block row row-container" :href="'./calendar-inner.html?&' + 'mode=' + info.dateCategory + '&date=' + info.date" target="_blank">
                                             <div class="col-md-5" >
                                                  <div class="calendar-dot calendar-dot-sm calendar-dot-show me-1"></div>
                                                  Представление
                                                  <span v-if="info.show === true && info.addText.category === 'show'">
                                                       {{info.addText.text}}
                                                  </span>
                                             </div>
                                             <div class="col-md-6" v-if="info.description">
                                                  {{info.description.desShow}}
                                             </div>
                                             <div class="col-md-1" v-if="info.description.desShow">
                                                  <i class="bi bi-arrow-right"></i>
                                             </div>
                                        </a>
                                        <a v-if="info.pay === true" class="d-flex calendar-info-block row row-container" :href="'./calendar-inner.html?&' + 'mode=' + info.dateCategory + '&date=' + info.date" target="_blank">
                                             <div class="col-md-5" >
                                                  <div class="calendar-dot calendar-dot-sm calendar-dot-pay me-1"></div>
                                                  Уплата
                                                  <span v-if="info.pay === true && info.addText.category === 'pay'">
                                                       &nbsp;{{info.addText.text}}
                                                  </span>
                                             </div>
                                             <div class="col-md-6" v-if="info.description">
                                                  {{info.description.desPay}}
                                             </div>
                                             <div class="col-md-1" v-if="info.description.desPay">
                                                  <i class="bi bi-arrow-right"></i>
                                             </div>
                                        </a>
                                        <a v-if="info.payShow === true" class="d-flex calendar-info-block row row-container" :href="'./calendar-inner.html?&' + 'mode=' + info.dateCategory + '&date=' + info.date" target="_blank">
                                             <div class="col-md-5" >
                                                  <div class="calendar-dot calendar-dot-sm calendar-dot-pay-show me-1"></div>
                                                  Представление и уплата
                                                  <span v-if="info.payShow === true && info.addText.category === 'payShow'">
                                                       &nbsp;{{info.addText.text}}
                                                  </span>
                                             </div>
                                             <div class="col-md-6" v-if="info.description">
                                                  {{info.description.desPayShow}}
                                             </div>
                                             <div class="col-md-1" v-if="info.description.desPayShow">
                                                  <i class="bi bi-arrow-right"></i>
                                             </div>
                                        </a>
                                        <hr class="d-block mt-2">
                                   </div>
                              </div>
                              <div class="my-2" v-for="info in sortedDates">
                                   <div v-if="info.weekend !== true">
                                        <div class="" :id="'date' + info?.date.split('-').join('')">
                                             <strong class="ff-pt-serif">
                                                  {{info.date}}
                                             </strong>
                                        </div>
                                        <div class="">
                                             <a 
                                             v-if="info.show === true"
                                             class="d-flex calendar-info-block row row-container mt-2" 
                                             :href="'./calendar-inner.html?&' + 'mode=' + info.dateCategory + '&date=' + info.date" 
                                             target="_blank">
                                                  <div class="col-md-5">
                                                       <div class="calendar-dot calendar-dot-sm calendar-dot-show me-1"></div>
                                                       Представление
                                                       <span v-if="info.show === true && info.addText.category === 'show'">
                                                            &nbsp;{{info.addText.text}}
                                                       </span>
                                                  </div>
                                                  <div class="col-md-6" v-if="info.description">
                                                       {{info.description.desShow}}
                                                  </div>
                                                  <div class="col-md-1" v-if="info.description.desShow">
                                                       <i class="bi bi-arrow-right"></i>
                                                  </div>
                                             </a>
                                             <a 
                                             v-if="info.pay === true"
                                             class="d-flex calendar-info-block row row-container mt-2" 
                                             :href="'./calendar-inner.html?&' + 'mode=' + info.dateCategory + '&date=' + info.date" 
                                             target="_blank">
                                                  <div class="col-md-5">
                                                       <div class="calendar-dot calendar-dot-sm calendar-dot-pay me-1"></div>
                                                       Уплата
                                                       <span v-if="info.pay === true && info.addText.category === 'pay'">
                                                            &nbsp;{{info.addText.text}}
                                                       </span>    
                                                  </div>                                              
                                                  <div class="col-md-6" v-if="info.description">
                                                       {{info.description.desPay}}
                                                  </div>
                                                  <div class="col-md-1" v-if="info.description.desPay">
                                                       <i class="bi bi-arrow-right"></i>
                                                  </div>
                                             </a>
                                             <a 
                                             v-if="info.payShow === true"
                                             class="d-flex calendar-info-block row row-container mt-2"
                                             :href="'./calendar-inner.html?&' + 'mode=' + info.dateCategory + '&date=' + info.date" target="_blank">
                                                  <div class="col-md-5">
                                                       <div class="calendar-dot calendar-dot-sm calendar-dot-pay-show me-1"></div>
                                                       Представление и уплата  
                                                       <!-- <span v-if="info.pay === true && info.addText.category === 'pay'">
                                                            &nbsp;{{info.addText.text}}
                                                       </span> -->
                                                  </div>
                                                  <div class="col-md-6" v-if="info.description">
                                                       {{info.description.desPayShow}}
                                                  </div>
                                                  <div class="col-md-1" v-if="info.description.desPayShow">
                                                       <i class="bi bi-arrow-right"></i>
                                                  </div>
                                             </a>
                                        </div>
                                        <hr class="d-block mt-2">
                                   </div>
                              </div>
                         </div>
                    </div>
                    
               </div>
               <div class="w-100 row row-container mt-2">
                    <div class="col-xxl-4 col-12 d-flex align-items-center my-1">
                         <div class="calendar-dot calendar-dot-lg calendar-dot-pay me-1"></div>
                         <span class="color-gray-dark fs-14">Уплата налогов, сборов и неналоговых платежей</span>
                    </div>
                    <div class="col-xxl-4 col-12 d-flex align-items-center my-1">
                         <div class="calendar-dot calendar-dot-lg calendar-dot-show me-1"></div>
                         <span class="color-gray-dark fs-14">Представление деклараций</span>
                    </div>
                    <div class="col-xxl-4 col-12 d-flex align-items-center my-1">
                         <div class="calendar-dot calendar-dot-lg calendar-dot-pay-show me-1"></div>
                         <span class="color-gray-dark fs-14">Представление и уплата</span>
                    </div>
               </div>
               <!-- <div class="calendar-time-block" v-for="(value, key) in weekTime">
                    <div>{{ key }}--{{value}}</div>
               </div> -->
               <div class="row row-container mt-3">
                    <div class="col-xxl-4 d-flex flex-column justify-content-between my-1">
                         <div class="calendar-today">
                              <span class="color-nav-black d-block">Сегодня</span>
                              <div class="mt-2">
                                   <i class="bi bi-calendar color-gold fs-14 me-1"></i>
                                   <span class="color-gold fs-24 ff-pt-serif">{{setToday?.dateNumber}}</span>
                                   <span class="fs-24 ff-pt-serif">({{setToday?.dayOfWeek}})</span>
                              </div>
                         </div>
                         <div class="work-time-elem d-flex flex-row align-items-center justify-content-between mt-2">
                              <span class="fs-16 color-nav-black">Календарные дни</span>
                              <div class="time-underline mt-2 mx-2"></div>
                              <span class="color-gold fs-18">{{weekTime.sumDays}}</span>
                         </div>
                    </div>
                    <div class="col-xxl-4 d-flex flex-column justify-content-between my-1">
                         <div class="work-day-block">
                              <strong class="fs-16 d-block">
                                   Рабочие дни:
                              </strong>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">по пятидневной рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.workFive}}</span>
                              </div>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">по шестидневной рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.workSix}}</span>
                              </div>
                         </div>
                         <div class="work-day-block mt-2">
                              <strong class="fs-16 d-block">
                                   Нерабочие дни (выходные и праздничные дни): 
                              </strong>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">по пятидневной рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.offFive}}</span>
                              </div>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">по шестидневной рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.offSix}}</span>
                              </div>
                         </div>
                    </div>
                    <div class="col-xxl-4 d-flex flex-column justify-content-between">
                         <div class="work-day-block">
                              <strong class="fs-16 d-block">
                                   Расчетная норма рабочего времени (в часах):
                              </strong>
                              <span class="fw-bold fs-14">для пятидневной рабочей недели:</span>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">при 40-часовой рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.timeFiveWeek40}}</span>
                              </div>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">при 35-часовой рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.timeFiveWeek35}}</span>
                              </div>
                         </div>
                         <div class="work-day-block mt-2">
                              <span class="fw-bold fs-14">для шестидневной рабочей недели:</span>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">при 40-часовой рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.timeSixWeek40}}</span>
                              </div>
                              <div class="work-time-elem d-flex flex-row align-items-center justify-content-between my-1">
                                   <span class="fs-16 color-nav-black">при 35-часовой рабочей неделе</span>
                                   <div class="time-underline mt-2 mx-2"></div>
                                   <span class="color-gold fs-18">{{weekTime.timeSixWeek35}}</span>
                              </div>
                         </div>
                    </div>
               </div>
               <!-- <div class="" v-for="(value, key) in weekTime">
                    {{key}}-{{value}}
               </div> -->
          </div>

          <template id="test-comp-template">
               <div>
                    <!-- <b v-if="message != null">{{ message }}</b> -->
               </div>
          </template>
          <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
          <script src="https://unpkg.com/vue@2"></script>
          <script src="https://unpkg.com/@popperjs/core@2"></script>
          <script src="https://unpkg.com/v-calendar"></script>
          <script >
          Vue.component('v-calendar', window.VCalendar)
          Vue.component('testComp', {
               template: '#test-comp-template',
               data() {
                    return {
                         message: null,
                    };
               },
               methods: {
                    // async isDayOff(){
                    //      const responce = await fetch('https://isdayoff.ru/230703?cc=BY', {
                    //           mode: 'no-cors',
                    //      })
                    //      console.log('responce', responce)
                    // },
                    checkweekend(){
                         axios.get('https://isdayoff.ru/today')
                              .then(response => {
                                   if(response.data == '0'){
                                        this.message = 'Work'
                                   }
                                   else{
                                        this.message = 'DayOff'
                                   }
                                   this.response = response.data;
                                   // console.log('response:', this.response);
                                   this.$emit('message-updated', this.message);
                              })
                                   .catch(error => {
                                   console.error('Error:', error);
                              });
                    }
               },
               mounted() {
                    this.checkweekend()
               }
          });
          new Vue({
               el: '#vueCalendar',
               // props: {
               //      name: String
               // },
               components: {
               },
               data() {
                    return{
                         isOn: 'false',
                         // placeholder data
                         dates: [
                              
                              {
                                   date: '2024-02-05',
                                   pay: false,
                                   show: false,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '(за исключением нерезидентов)',
                                        category: 'pay'
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: 'Налог на доходы иностранных организаций, не осуществляющих деятельность в Республике Беларусь через постоянное представительство',
                                        desShow: '',
                                        desPayShow: 'Проверка'
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-01-29',
                                   pay: false,
                                   show: true,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '(за исключением нерезидентов)',
                                        category: 'pay'
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: '',
                                        desShow: 'Утилизационный сбор',
                                        desPayShow: 'На доходы налог иностранных организаций, не осуществляющих деятельность в Республике Беларусь через постоянное представительство'
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-02-15',
                                   pay: true,
                                   show: false,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: ''
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: 'Оффшорный сбор',
                                        desShow: '',
                                        desPayShow: 'Текст описания'
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-02-25',
                                   pay: true,
                                   show: false,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: ''
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: 'Оффшорный сбор',
                                        desShow: '',
                                        desPayShow: 'Текст описания'
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-02-25',
                                   pay: true,
                                   show: false,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: ''
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: 'Оффшорный сбор 2',
                                        desShow: '',
                                        desPayShow: 'Текст описания 2'
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-02-10',
                                   pay: false,
                                   show: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: ''
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: '',
                                        desShow: 'Текст'
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-02-12',
                                   pay: true,
                                   show: false,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: ''
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: 'Утилизационный сбор',
                                        desShow: ''
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-01-25',
                                   pay: true,
                                   show: false,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: ''
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: 'Утилизационный сбор',
                                        desShow: ''
                                   },
                                   dateCategory: 'calendarOrg'
                              },
                              {
                                   date: '2024-02-06',
                                   pay: true,
                                   show: false,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '(за исключением нерезидентов)',
                                        category: 'pay',
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: 'Налог на прибыль',
                                        desShow: '',
                                        desPayShow: 'Текст описания'
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-01-05',
                                   pay: false,
                                   show: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: '',
                                        desShow: 'Оффшорный сбор',
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-02-10',
                                   pay: true,
                                   show: false,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: 'Акцизный сбор',
                                        desShow: '',
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-01-14',
                                   pay: false,
                                   show: true,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: '',
                                        desShow: 'Акцизный сбор',
                                        desPayShow: 'Текст описания'
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-02-20',
                                   pay: true,
                                   show: false,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: 'Утилизационный сбор',
                                        desShow: '',
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-01-25',
                                   pay: false,
                                   show: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: '',
                                        desShow: 'Налог на добавленную стоимость',
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-02-30',
                                   pay: false,
                                   show: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: '',
                                        desShow: 'Утилизационный сбор',
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-01-05',
                                   pay: false,
                                   show: true,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: false,
                                   description: {
                                        desPay: '',
                                        desShow: 'Акцизный сбор',
                                        desPayShow: 'Текст описания'
                                   },
                                   dateCategory: 'calendarIP',
                              },
                              {
                                   date: '2024-02-9',
                                   pay: true,
                                   show: false,
                                   payShow: true,
                                   weekend: false,
                                   addText: {
                                        text: '',
                                        category: '',
                                   },
                                   everyDay: true,
                                   description: {
                                        desPay: 'Оффшорный сбор',
                                        desShow: '',
                                        desPayShow: 'Текст описания'
                                   },
                                   dateCategory: 'calendarIP',
                              },
                         ],
                         selectedDate: null,
                         typeMode:'calendarOrg',
                         attributes: [],
                         minDate: null,
                         maxDate: null,
                         messageFromChild: null,
                         everyDayArr: [],
                         monthArr: [], 
                         sortedDates: [],
                         checkedDates: [],
                         dateToShow: [],
                         weekTime: {
                              sumDays: 0,
                              workFive: 0,
                              workSix: 0,
                              offFive: 0,
                              offSix: 0,
                              timeFiveWeek40: 0,
                              timeFiveWeek35: 0,
                              timeSixWeek40: 0,
                              timeSixWeek35: 0,
                              todayDate: {
                                   dateNumber: '',
                                   dayOfWeek: '',
                              },
                         },
                         monthTitle: '',
                         currentMonth: 0,
                         yearTitle: '',
                         disabledDates : [], 
                         mode: null,
                         disDateArr: [],
                         allOff: [],
                         selectedDisDates: [],
                         transDates: ['2024-02-17']
                    }
               },
               computed: {
                    computedWeekTime(){
                         const weekTime = {}
                         this.weekTime = {
                              sumDays: 31,
                         }
                         return weekTime
                    },
                    setToday() {
                         let timeObj= { dayOfWeek: '', dateNumber: ''}
                         const days = [
                              'воскресенье',
                              'понедельник',
                              'вторник',
                              'среда',
                              'четверг',
                              'пятница',
                              'суббота'
                         ];
                         let day = new Date()
                         let textDay = day.getDay()
                         let numberDay = day.toLocaleDateString('en-GB').split('/')
                         try {
                              timeObj.dayOfWeek = days[textDay]
                              timeObj.dateNumber = numberDay[0] + '.' + numberDay[1]
                         } catch (error) {
                              console.log('setToday error', error)
                         }
                         return timeObj
                         // + ' ' + day.toLocaleString('default', {month: 'long'}) if need text month
                    },
               },
               watch: {
                    // watchChange(typeMode){
                    //      this.changeType()
                    // }
                    typeMode(newVal) {
                         this.attributes = []
                         this.dateToShow = this.checkedDates.filter(el => {
                              let months = new Date(el.date).getMonth() + 1
                              return el.dateCategory === newVal && months == this.currentMonth
                         });
                         this.setAttributes()
                         this.changeType()
                    },
                    currentMonth(newVal){
                         this.setAttributes()
                         this.calcTime()
                         this.markWeekend()
                         this.processTimeDates()
                    }
               },
               methods: {
                    updateMessage(message) {
                         this.messageFromChild = message
                    },
                    disableDate(){
                         // this.isOn= 'true'
                         let disDateArr = []
                         // , '02/05/2024'
                         let arrOfDate = ['2024-01-01', '2024-01-02', '2024-01-07', '2024-03-08', '2024-05-01', '2024-05-09', '2024-05-14', '2024-07-03',]
                         try {
                              arrOfDate.forEach(el => {
                                   el+='T00:00:00' //if time is not define
                                   disDateArr.push(new Date(el))
                              });
                         } catch (error) {
                              console.log('error in disable dates', error)
                         }

                         this.disDateArr = disDateArr
                         // console.log('disDateArr', disDateArr)
                         disDateArr = [{ weekdays: [1, 7] },...disDateArr ]
                         this.disabledDates = disDateArr
                         // console.log('this.dis', this.disabledDates)
                    },
                    fillDates(){
                         // this.dates = Array.from(Array(35).keys())
                         // console.log('parent', this.messageFromChild)
                    },
                    calcMinDate(){
                         let lastDay =  new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1)
                         this.minDate = lastDay
                    },
                    calcMaxDate(){
                         let firstDay =  new Date(new Date().getFullYear(), new Date().getMonth() + 2, 0)
                         this.maxDate = firstDay
                    },
                    onDayClick(day) {
                         // day.date if need date in selected
                         this.selectedDate = day.date
                         
                         let blockId = '#date' + day.id.split('-').join('')
                         let elToScroll = document.querySelector(blockId)
                         var is_safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
                         if(elToScroll && !is_safari){
                              elToScroll.scrollIntoView({
                                   behavior : 'smooth',
                                   block : 'center',
                              })
                         }
                         if(elToScroll && is_safari){
                              elToScroll.scrollIntoView(false)
                         }
                    },
                    checkDate(){
                         this.dates.filter(el=>{
                              let dateObj = new Date(el.date) 
                              if(dateObj instanceof Date && !isNaN(dateObj)){
                                   this.checkedDates.push(el)
                              }
                         })
                    },
                    checkValidDateRule(date){
                         return date instanceof Date && !isNaN(date)
                    },
                    setAttributes() {
                         this.filterDays()
                         this.attributes = []
                         this.dateToShow.forEach(el => {
                              try {
                                   var splitedRule = el.date.split('-')
                                   var formattedDate = new Date(splitedRule[0], new Number(splitedRule[1]) - 1, splitedRule[2])

                                   if (this.checkValidDateRule(formattedDate) && !el.everyDay) {
                                        let existingItem = this.attributes.find(item => item.dates.getTime() === formattedDate.getTime() && item.dot.style.backgroundColor === '#C47A2C');
                                        if (!existingItem && el.show === true) {
                                             this.attributes.push({
                                                  dates: formattedDate,
                                                  dot: {
                                                  style: {
                                                       backgroundColor: '#C47A2C'
                                                  }
                                                  },
                                                  popover: {
                                                  visibility: 'hover',
                                                  // hideIndicator: true,
                                                  label: el.addText.category === 'show' ? 'Представление' + ' ' + el.addText.text : 'Представление',
                                                  },
                                             })
                                        }
                                        
                                        existingItem = this.attributes.find(item => item.dates.getTime() === formattedDate.getTime() && item.dot.style.backgroundColor === '#034A66');
                                        if (!existingItem && el.pay === true) {
                                             this.attributes.push({
                                                  dates: formattedDate,
                                                  dot: {
                                                  style: {
                                                       backgroundColor: '#034A66'
                                                  }
                                                  },
                                                  popover: {
                                                  visibility: 'hover',
                                                  // hideIndicator: true,
                                                  label: el.addText.category === 'pay' ? 'Уплата' + ' ' + el.addText.text : 'Уплата',
                                                  },
                                             })
                                        }
                                        
                                        existingItem = this.attributes.find(item => item.dates.getTime() === formattedDate.getTime() && item.dot.style.backgroundColor === '#D24344');
                                        if (!existingItem && el.payShow === true) {
                                             this.attributes.push({
                                                  dates: formattedDate,
                                                  dot: {
                                                  style: {
                                                       backgroundColor: '#D24344'
                                                  }
                                                  },
                                                  popover: {
                                                  visibility: 'hover',
                                                  label: 'Представление и уплата',
                                                  },
                                             })
                                        }
                                   }
                              } catch (err) {
                                   console.log('Error in date format', err)
                              }
                         })
                         this.setTransAttr()
                    },
                    setTransAttr(){
                         const currentPage = this.$refs.calendar.pages[0]
                         let transDatesToShow = []
                         transDatesToShow = this.transDates.filter(el => new Date(el).getMonth() + 1 === currentPage.month)
                         transDatesToShow.forEach(el=>{
                              try {
                                   if(this.checkValidDateRule(new Date(el))){
                                        this.attributes.push(
                                             {
                                                  content:{
                                                       style:{
                                                            color: '#282828'
                                                       }
                                                  },
                                                  dates: [
                                                       el
                                                  ]
                                             }
                                        )
                                   }
                              } catch (error) {
                                   console.log('Error in trans date to show', error)
                              }
                         })
                    },
                    filterDays(){
                         this.monthArr = []
                         this.everyDayArr = []
                         this.sortedDates = []
                         this.dateToShow.filter(el=>{
                              if(el.everyDay !== true){
                                   this.monthArr.push(el)
                              }
                              else{
                                   this.everyDayArr.push(el)
                              }
                         })
                         this.sortedDates = this.monthArr.sort((a, b)=>{
                              return Number(new Date(a.date)) - Number(new Date(b.date))
                         })
                    },
                    changeType(){
                         let underLine = document.querySelector('.tab-underline-accent')
                         underLine.classList.toggle('tab-underline-checked')
                         this.filterDateToShow()
                    },
                    filterDateToShow(){
                         this.dateToShow = this.checkedDates.filter(el=>{
                              let months = new Date(el.date).getMonth() + 1
                              return el.dateCategory === this.typeMode && months == this.currentMonth
                         })
                    },
                    formatTitle(val){
                         let localMonth = {
                              month: new Date(val).toLocaleString('ru', {
                                   month: 'long',
                              }),
                              year: new Date(val).toLocaleString('ru', {
                                   year: 'numeric',
                              }) 
                         }
                         let splitedTitle = localMonth.month.split('')
                         let filteredTitle = splitedTitle.filter(el=> el !== 'ь')
                         filteredTitle.push('е')
                         filteredTitle.join('')
                         this.monthTitle = filteredTitle.join('')
                         this.yearTitle = localMonth.year
                    },
                    checkMonth(){
                         const target = this
                         const calendar = this.$refs.calendar
                         let arrow = document.querySelectorAll('.vc-arrow')
                         arrow.forEach(function(el){
                              el.addEventListener('click', function(){
                                   // let firstDay = document.querySelector('.vc-day.day-1')
                                   // console.log('firstDay', firstDay)
                                   let newCurrentMonth = calendar.pages[0].month;
                                   target.setNewMonth(newCurrentMonth)
                                   target.filterDateToShow()
                                   target.formatTitle(new Date(calendar.pages[0].year, calendar.pages[0].month - 1, 1).toISOString())
                              })
                         })
                    },
                    setNewMonth(newCurrentMonth){
                         this.currentMonth = newCurrentMonth
                    },
                    calcETCWeekend(){
                         const currentPage = this.$refs.calendar.pages[0]
                         let d = new Date(currentPage.monthComps.year, currentPage.monthComps.month, 0).toLocaleString('default', { month: 'long' });
                         const etcWeekend = this.dates.filter(function(el){
                                   let dayWeedendArr = el.date.split('-')
                                   let dateWeekend = new Date(dayWeedendArr[0], dayWeedendArr[1], 0).toLocaleString('default', { month: 'long' })
                                   return el.weekend === true && d === dateWeekend
                              }).reduce((acc, current) => {
                                   if (!acc.find((item) => item.weekend === current.weekend && item.date === current.date)) {
                                        acc.push(current);
                                   }
                                   return acc;
                         }, [])
                         return etcWeekend
                    },
                    isSunday(date) {
                         if (date.getDay() === 0) {
                              return true;
                         }
                         return false;
                    },
                    isSaturday(date) {
                         if (date.getDay() === 6) {
                              return true;
                         }
                         return false;
                    },
                    isDateInMonth(date, month) {
                         // console.log('we are here isDateInMonth');
                         const dateMonth = date.getMonth() + 1;
                         // console.log('dateMonth === month', dateMonth, month);
                         return dateMonth === month;
                    },
                    processTimeDates() {
                         this.selectedDisDates.forEach(element => {
                              // debugger
                              this.checkPrevDate(element)
                         })
                    },
                    checkPrevDate(element){
                         let prevDate = new Date(element)
                         prevDate.setDate(prevDate.getDate() - 1)
                         // console.log('prevDate', prevDate)
                         
                         if(
                              this.isDateInMonth(prevDate, this.$refs.calendar.pages[0].monthComps.month)
                              && this.checkWork(prevDate, null, this.disDateArr)
                         ){
                              this.checkWeekend(element)
                         }
                         else{
                              console.log('we are not here');
                         }
                         // {
                         //      if (this.isSunday(prevDate)) {
                         //           console.log('we are here sun')
                         //           this.weekTime.timeSixWeek40--
                         //           this.weekTime.timeSixWeek35--
                         //      } else if (this.isSaturday(prevDate)) {
                         //           console.log('we are here sat')
                         //           this.weekTime.timeFiveWeek40--
                         //           this.weekTime.timeFiveWeek35--
                         //      } else {
                         //           this.weekTime.timeSixWeek40--
                         //           this.weekTime.timeSixWeek35--
                         //           this.weekTime.timeFiveWeek40--
                         //           this.weekTime.timeFiveWeek35--
                         //           //todo: дополнить проверку функцией написанной ниже(или нет, пока не решил) 
                         //      }
                         // }
                    },
                    checkWeekend(element){
                              // console.log('element', element)
                              let nowDate = new Date(element)
                              nowDate.setDate(nowDate.getDate())
                              // console.log('prevDate', nowDate)
                              if (this.isSunday(nowDate)) {
                                   // console.log('we are here sun')
                                   this.weekTime.timeSixWeek40--
                                   this.weekTime.timeSixWeek35--
                              } else if (this.isSaturday(nowDate)) {
                                   // console.log('we are here sat')
                                   this.weekTime.timeFiveWeek40--
                                   this.weekTime.timeFiveWeek35--
                              } else {
                                   this.weekTime.timeSixWeek40--
                                   this.weekTime.timeSixWeek35--
                                   this.weekTime.timeFiveWeek40--
                                   this.weekTime.timeFiveWeek35--
                                   //todo: дополнить проверку функцией написанной ниже(или нет, пока не решил) 
                              }
                    },
                    checkWork(dateString, firstArr, secondArr) {
                         const targetDate = new Date(dateString)
                         // console.log('targetDate', targetDate);
                         const foundInAllOff = firstArr?.some(date => date.getTime() === targetDate.getTime())
                         const foundInDisDateArr = secondArr?.some(date => date.getTime() === targetDate.getTime())

                         if (foundInAllOff && foundInDisDateArr) {
                              return false
                         } else if (foundInAllOff) {
                              return false
                         } else if (foundInDisDateArr) {
                              return false
                         } else {
                              return true
                         }

                    },
                    calcTime() {
                         const currentPage = this.$refs.calendar.pages[0];
                         const year = currentPage.monthComps.year;
                         const month = currentPage.monthComps.month;
                         const daysInMonth = new Date(year, month, 0).getDate();
                         const sat = [];
                         const sun = [];
                         const allOff = [];

                         let disNumber = 0;

                         for (let i = 1; i <= daysInMonth; i++) {
                              const newDate = new Date(year, month - 1, i);
                              const dayOfWeek = newDate.getDay();

                              if (dayOfWeek === 0) sun.push(newDate);
                              if (dayOfWeek === 6) sat.push(newDate);
                              if (dayOfWeek === 0 || dayOfWeek === 6) allOff.push(newDate);
                         }

                         this.allOff = allOff;

                         const disabledDatesThisMonth = this.disDateArr.filter(date => date.getMonth() + 1 === month);
                         this.selectedDisDates = disabledDatesThisMonth;

                         disabledDatesThisMonth.forEach(el => {
                              if (el.getDay() !== 0) disNumber++;
                         });

                         const etcWeekendLength = this.calcETCWeekend();

                         const getTot = daysInMonth - disNumber;
                         const workFive = getTot - allOff.length - etcWeekendLength.length;
                         const workSix = getTot - sun.length - etcWeekendLength.length;

                         this.weekTime = {
                              sumDays: daysInMonth,
                              workFive,
                              workSix,
                              offFive: allOff.length + etcWeekendLength.length + disNumber,
                              offSix: sun.length + etcWeekendLength.length + disNumber,
                              timeFiveWeek40: (40 / 5) * workFive,
                              timeFiveWeek35: (35 / 5) * workFive,
                              timeSixWeek40: sun.length * 5 + (getTot - sat.length - sun.length - etcWeekendLength.length) * 7,
                              timeSixWeek35: sun.length * 5 + (getTot - sat.length - sun.length - etcWeekendLength.length) * 6,
                              todayDate:{ dayOfWeek:'', dateNumber:'' }
                         };
                    },
                    markWeekend(){
                         this.dates.forEach(function(el){
                              if(el.weekend === true){
                                   // console.log('el', el)
                                   // console.log('el.date', el.date)
                                   // console.log('mark', document.querySelector('.vc-day.id-' + el.date))
                                   try{
                                        document.querySelector('.id-' + el.date).classList.add('etc-weekend')
                                   }
                                   catch(err){
                                        // console.log('Error in mark', err)
                                   }
                              }
                         })
                    }
                    // testCheck(){
                    //      const calendar = this.$refs.calendar
                    //      console.log('calendar.pages', calendar.pages[0])
                    //      console.log('calendar',calendar)
                    //      console.log('getPageDays', calendar.pageForThisMonth())
                    // },
               },
               mounted() {
                    this.disableDate()
                    this.checkDate()
                    this.calcMinDate()
                    this.calcMaxDate()
                    this.checkMonth()
                    this.currentMonth = new Date().getMonth() + 1
                    this.changeType()
                    this.setAttributes()
                    this.formatTitle(new Date())
                    // this.calcTime()
                    // this.setToday()
                    // this.markWeekend()
                    // const urlParams = new URLSearchParams(window.location.search)
               }
          })
          </script>
     </div>
</div>