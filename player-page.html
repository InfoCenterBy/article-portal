<!DOCTYPE html>
<html lang="ru">
	<head>
      <title>Плеер</title>
      <meta charset="UTF-8" />
      <meta name="format-detection" content="telephone=no" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.cdnfonts.com/css/pt-serif" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Serif" />
      <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

      <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/jquery.mcustomscrollbar/3.0.6/jquery.mCustomScrollbar.min.css">

      <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css" />

      <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/css/tempusdominus-bootstrap-4.min.css">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/1.1.2/css/bootstrap-multiselect.min.css" integrity="sha512-fZNmykQ6RlCyzGl9he+ScLrlU0LWeaR6MO/Kq9lelfXOw54O63gizFMSD5fVgZvU1YfDIc6mxom5n60qJ1nCrQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
      <link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css" rel="stylesheet" />
      <link rel="stylesheet" href="css/style.min.css" />
</head>
	<head>
		<link rel="stylesheet" href="https://cdn.vidstack.io/player/theme.css" />
		<link rel="stylesheet" href="https://cdn.vidstack.io/player/video.css" />
	</head>
	<body>
		<header class="new-header d-flex flex-row justify-content-between align-items-center">
     <div class="d-flex flex-row align-items-center">
          <div class="mobile-menu me-2">
               <button type="button" class="bi bi-list" id="mobile-button"></button>
               <div class="mobile-nav">
     <div class="mobile-nav-block  d-flex flex-row">
          <div class="mobile-nav-block__icon">
               <i class="icon-ballot"></i>
          </div>
          <div class="mobile-nav-block__text">
               <a href="">
                    <strong>Аналитические материалы</strong>
               </a>
               <div class="mobile-nav-block__sub-text d-flex flex-column">
                    <a href="">Организациям</a>
                    <a href="">Индивидуальным предпринимателям</a>
                    <a href="">Физическим лицам</a>
               </div>
          </div>
     </div>
     <div class="mobile-nav-block  d-flex flex-row">
          <div class="mobile-nav-block__icon">
               <i class="icon-ballot"></i>
          </div>
          <div class="mobile-nav-block__text">
               <a href="">
                    <strong>Сервисы</strong>
               </a>
               <div class="mobile-nav-block__sub-text d-flex flex-column">
                    <a href="">Вопрос-ответ</a>
                    <a href="">Медиатека</a>
                    <a href="">Семинары/вебинары</a>
                    <a href="">Режим налогообложения</a>
                    <a href="">Форум</a>
                    <a href="">Реестр налоговых консультантов</a>
                    <a href="">
                         Перечень моделей (модификации) КСА, которые могут быть (не могут быть) доработаны заявителями до
                         соответствия новым
                         требованиям к КСА
                    </a>
                    <a href="">
                         Инфорграфика
                    </a>
               </div>
          </div>
     </div>
     <div class="mobile-nav-block  d-flex flex-row">
          <div class="mobile-nav-block__icon">
               <i class="icon-envelope-open-text"></i>
          </div>
          <div class="mobile-nav-block__text">
               <a href="">
                    <strong>Новости</strong>
               </a>
          </div>
     </div>
     <div class="mobile-nav-block  d-flex flex-row">
          <div class="mobile-nav-block__icon">
               <i class="icon-file-invoice"></i>
          </div>
          <div class="mobile-nav-block__text">
               <a href="">
                    <strong>Налоговый календарь</strong>
               </a>
          </div>
     </div>
     <a class="subcribe-btn mt-5" href="#">
          Оформить доступ
     </a>
     <div class="d-flex flex-column justify-content-center text-center mt-2">
          <span class="d-block">Телефон для консультации:</span>
          <a class="color-gold d-block ff-pt-serif" href="tel:+375172691903">+375 (17) 269-19-03</a>
     </div>
</div>
          </div>
          <picture>
               <source media="(min-width: 960px)" srcset="./img/padatak-logo.png">
               <img src="./img/padatak-logo-mobile.png" alt="padatak-logo" >
          </picture>
          <div class="ms-2">
               <span class="color-gray fs-20">
                    12+
               </span>
          </div>
     </div>
     <div class="header-hide">
          <form class="new-header-search w-100 mx-2">
     <input type="text" name="searchBar" id="searchBar" placeholder="Поиск">
     <button type="submit">
          <i class="bi bi-search"></i>
     </button>
</form>
     </div>
     <div class="header-tel">
          <span>Телефон для консультации:</span> <br>
          <span class="color-gold ff-pt-serif">+375 (17) 269-19-03</span>
     </div>
     <div class="d-flex flex-row header-mobile-menu justify-content-center">
          <div class="d-flex flex-row">
               <button class="modal-mobile-button mx-2" type="button" data-bs-toggle="modal" data-bs-target="#searchModal">
                    <i class="bi bi-search"></i>
               </button>
               <button class="modal-mobile-button btn-dropdown show mx-2" 
                         type="button" data-bs-toggle="dropdown" aria-expanded="true" data-bs-auto-close="outside" >
                    <i class="icon-circle-user"></i>
               </button>
               <div class="dropdown-menu dropdown-menu-login dropdown-menu-end p-3" data-popper-placement="bottom-end" >
     <div class="dropdown-menu-wrapper">
          <form id="form-login">
               <div class="input mb-3">
                    <label for="email-login">Email <span>*</span></label>
                    <input type="text" id="email-login" class="_email _required" placeholder="Ваш email">
                    <div class="input__text-error"><i class="bi bi-exclamation-triangle me-2"></i>Электронная почта не может быть пустой</div>
                    <div class="input__text-error-email"><i class="bi bi-exclamation-triangle me-2"></i>Адрес электоронной почты должен заканчиваться на @**.**</div>
               </div>
               <div class="input mb-3">
                    <label for="password-login">Пароль <span>*</span></label>
                    <div class="input__password">
                         <input type="password" id="password-login" class="_required" placeholder="Введите пароль">
                         <i class="icon-password bi bi-eye-slash"></i>
                    </div>
                    <div class="input__text-error"><i class="bi bi-exclamation-triangle me-2"></i>Пароль не может быть пустым</div>
               </div>
               <div class="d-flex justify-content-between align-items-center mb-4">
                    <div class="checkbox">
                         <input type="checkbox" id="remember-me">
                         <label class="checkbox__label" for="remember-me">
                              <span class="checkbox__label_text">Запомнить меня</span>
                         </label>
                    </div>
                    <a href="#" class="link link_blue-light">Забыли пароль?</a>
               </div>
               <div class="mb-2">
                    <a href="main-login.html" class="button w-100">Войти</a>
               </div>
               <div>
                    <a href="login.html" class="button button_empty w-100">Зарегистрироваться</a>
               </div>
          </form>
     </div>
</div>
          </div>
          <div class="header-button header-button-enter header-button-notification flex-row align-items-center"  
               type="button" class="how" data-bs-toggle="dropdown" aria-expanded="true" data-bs-auto-close="outside">
               <span>Иванова И.И.</span>
               <div class="header-button__hr"></div>
               <i class="icon-circle-user"></i>
          </div>
          <div class="dropdown-menu dropdown-menu-user dropdown-menu-end py-2 border-10" 
               data-popper-placement="bottom-end">
               <div class="dropdown-menu-wrapper">
                    <div class="dropdown-arrow"></div>
                    <ul class="ps-0 mb-0">
                         <li><a href="profile.html" class="py-2 px-3 d-block"><i class="bi bi-person me-3"></i>Профиль</a></li>
                         <li><a href="favorites.html" class="py-2 px-3 d-block"><i class="bi bi-bookmark me-3"></i>Избранное</a></li>
                         <li><a href="browsing-history.html" class="py-2 px-3 d-block"><i class="bi bi-clock me-3"></i>История просмотров</a></li>
                         <li><a href="subscription.html" class="py-2 px-3 d-block d-flex flex-row align-items-center"><i class="bi bi-unlock me-3"></i>Управление подпиской <span class="notification-circle notification-circle-active ms-1">10+</span></a></li>
                         <li><a href="settings.html" class="py-2 px-3 d-block"><i class="bi bi-gear me-3"></i>Настройки</a></li>
                    </ul>
                    <hr class="my-2">
                    <a href="new-main.html" class="py-2 px-3 d-block"><i class="bi bi-box-arrow-right me-3"></i>Выйти</a>
               </div>
          </div>
          <div class="header-button header-button-subscribe flex-row align-items-center">
               <span>Оформить доступ</span>
               <div class="header-button__hr"></div>
               <i class="icon-gem"></i>
          </div>
     </div>
</header>
		<div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
     <div class="modal-dialog">
          <div class="modal-content">
               <div class="modal-body d-flex flex-row align-items-center justify-content-between">
                    <form class="new-header-search w-100 mx-2">
                         <input type="text" name="searchBar" id="searchBar" placeholder="Поиск">
                         <button type="submit">
                              <i class="bi bi-search"></i>
                         </button>
                    </form>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
          </div>
     </div>
</div> 
<nav class="side-navbar active-nav justify-content-start flex-column" id="sidebar">
     <div class="nav main-nav flex-column w-100">
          <div href="#" class="nav-link">
               <a href="" class="nav-link__icon">
                    <i class="icon-ballot"></i>
               </a>
               <div class="nav-link__text">
                    <a href="" class="nav-link__text-sub d-flex">Аналитические материалы</a>
                    <div class="nav-link__list d-flex flex-column">
                         <a href="">Организациям</a>
                         <a href="">Индивидуальным предпринимателям</a>
                         <a href="">Физическим лицам</a>
                    </div>
               </div>
          </div>
          <div href="#" class="nav-link">
               <a href="" class="nav-link__icon">
                    <i class="icon-table-layout"></i>
               </a>
               <div class="nav-link__text">
                    <a href="" class="nav-link__text-sub d-flex">Сервисы</a>
                    <div class="nav-link__list d-flex flex-column">
                         <a href="">Вопрос-ответ</a>
                         <a href="">Медиатека</a>
                         <a href="" class="color-gold d-flex flex-row align-items-center">
                              <span>Еще</span> 
                              <i class="ms-1 bi bi-chevron-right hover-gold" style="font-size: 14px; line-height: 14px; margin-top: 2px;"></i>
                         </a>
                    </div>
               </div>
          </div>
          <div href="#" class="nav-link">
               <a href="" class="nav-link__icon">
                    <i class="icon-envelope-open-text"></i>
               </a>
               <div class="nav-link__text">
                    <a href="" class="nav-link__text-sub">Новости</a>
               </div>
          </div>
          <div href="#" class="nav-link">
               <a href="" class="nav-link__icon">
                    <i class="icon-file-invoice"></i>
               </a>
               <div class="nav-link__text">
                    <a href="" class="nav-link__text-sub">Налоговый календарь</a>
               </div>
          </div>
          <div href="#" class="nav-link">
               <a href="" class="nav-link__icon">
                    <i class="icon-calendar-lines"></i>
               </a>
               <div class="nav-link__text">
                    <a href="" class="nav-link__text-sub">Справочная информация</a>
               </div>
          </div>
          <div href="#" class="nav-link">
               <a href="" class="nav-link__icon">
                    <i class="icon-calculator"></i>
               </a>
               <div class="nav-link__text">
                    <a href="" class="nav-link__text-sub">Формы документов</a>
               </div>
          </div>
     </div>
     <hr>
     <div href="#" class="nav-link">
          <a href="" class="nav-link__icon-simple">
               <i class="icon-attribution-pen"></i>
          </a>
          <div class="nav-link__text">
               <a href="">Авторам</a>
          </div>
     </div>
     <div href="#" class="nav-link">
          <a href="" class="nav-link__icon-simple">
               <i class="icon-megaphone"></i>
          </a>
          <div class="nav-link__text">
               <a href="">Рекламодателям</span>
          </div>
     </div>
     <a class="nav-hidden subcribe-btn mt-3" href="#">
          Оформить доступ
     </a>
     <div class="nav-hidden text-center mt-2">
          <span class="d-block">Телефон для консультации:</span>
          <a class="color-gold d-block ff-pt-serif" href="tel:+375172691903">+375 (17) 269-19-03</a>
     </div>
</nav>



		<div class="nav-container active-container">
			<a class="" id="menu-btn"><i class="bi-chevron-right bi"></i></a>
			<div class="main-content">
				<section class="main-section">
					<div class="row">
						<nav aria-label="breadcrumb" class="col-12">
							<ol class="breadcrumb">
								<li class="breadcrumb-item">
									<a href="main.html"><i class="bi bi-house"></i></a>
								</li>
								<li class="breadcrumb-item active" aria-current="page">Плеер</li>
							</ol>
						</nav>
					</div>
				</section>
				<div class="mt-4"></div>
				<section class="main-section"><script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<div id="app">
	<template id="player-template">
		<div class="row">
			<div class="d-flex justify-content-center mt-5 col-12" :class="[loading ? 'd-block' : 'd-none']">
				<div
					class="spinner-border"
					role="status"
					style="border-color: #b9b9b9; border-right-color: var(--color-gold); width: 3rem; height: 3rem"
				>
					<span class="visually-hidden">Loading...</span>
				</div>
			</div>
			<div class="col-12" :class="[loading ? 'd-none' : 'd-block']">
				<h2 class="h2">{{title}}</h2>
			</div>
			<div class="col-12" :class="[loading ? 'd-none' : 'd-block']">
				<div ref="target" class="w-100" style="z-index: 3"></div>
			</div>
			
			
			<div class="mt-4 col-12" :class="[loading ? 'd-none' : 'd-block']">
				<h3 class="mb-0 h3">Главы:</h3>
				<div class="d-flex flex-column gap-3 mt-3">
					<a
						v-for="(ch, idx) in chapters"
						:key="idx"
						href="#"
						class="d-flex flex-row align-items-center gap-2 transition-3 transition-3 color-black hover-gold"
						@click.prevent="seekTo(ch.time)"
					>
						<i
							class="w-fit-content bi fs-32"
							:class="[idx <= currentChapterIdx ? 'bi-eye-fill color-gold' : 'bi-eye color-gray' ]"
						></i>
						<div class="d-flex flex-row gap-1 p-3 border border-1 border-10 border-gray w-100">
							<span>{{ formatTime(ch.time) }} </span>
							<span>—</span>
							<span>{{ ch.label }}</span>
						</div>
					</a>
				</div>
			</div>
		</div>
	</template>
	<player-component></player-component>
</div>

<script type="module">
	import { VidstackPlayer, VidstackPlayerLayout } from 'https://cdn.vidstack.io/player';

	window.Vue.createApp({
		components: {
			'player-component': {
				template: document.getElementById('player-template').innerHTML,
				data() {
					return {
						player: null,
						muted: false,
						title: 'Sprite Fight',
						duration: 0,
						// timeCodes: [
						// 	{ time: 10, label: 'Вступление' },
						// 	{ time: 42, label: 'Битва начинается' },
						// 	{ time: 75, label: 'Кульминация' },
						// ],
						chapters: [],
						RUSSIAN: {
							Accessibility: 'Поддержка',
							AirPlay: 'AirPlay',
							Announcements: 'Уведомления',
							Audio: 'Аудио',
							Auto: 'Авто',
							Boost: 'Усиление',
							Captions: 'Субтитры',
							Chapters: 'Главы',
							Color: 'Цвет',
							Connected: 'Подключено',
							Connecting: 'Подключение',
							Continue: 'Продолжить',
							Default: 'По умолчанию',
							Disabled: 'Отключено',
							Disconnected: 'Отключено',
							Download: 'Скачать',
							Family: 'Шрифты',
							Font: 'Шрифт',
							Fullscreen: 'Полноэкранный',
							LIVE: 'Прямой эфир',
							Loop: 'Повторение',
							Mute: 'Выключить звук',
							Normal: 'Нормальный',
							Off: 'Выключено',
							Opacity: 'Прозрачность',
							Pause: 'Пауза',
							PiP: 'Картинка в картинке',
							Play: 'Воспроизведение',
							Playback: 'Воспроизведение',
							Quality: 'Качество',
							Replay: 'Повтор',
							Reset: 'Сброс',
							Seek: 'Перемотка',
							Settings: 'Настройки',
							Shadow: 'Тень',
							Size: 'Размер',
							Speed: 'Скорость',
							Text: 'Текст',
							Track: 'Трек',
							Unmute: 'Включить звук',
							Volume: 'Громкость',
							'Caption Styles': 'Стили субтитров',
							'Captions look like this': 'Субтитры выглядят так',
							'Closed-Captions Off': 'Субтитры выключены',
							'Closed-Captions On': 'Субтитры включены',
							'Display Background': 'Фон',
							'Enter Fullscreen': 'Полноэкранный режим',
							'Enter PiP': 'Картинка в картинке',
							'Exit Fullscreen': 'Выход из полноэкранного режима',
							'Exit PiP': 'Выход из картинки в картинке',
							'Google Cast': 'Google Cast',
							'Keyboard Animations': 'Анимации клавиатуры',
							'Seek Backward': 'Перемотка назад',
							'Seek Forward': 'Перемотка вперед',
							'Skip To Live': 'Перейти к прямому эфиру',
							'Text Background': 'Фон текста',
						},
						currentChapterIdx: -1,
						rafId: null,
						loading: true,
					};
				},
				methods: {
					getTimeFromUrl() {
						// Ищем ?t= или #t= в адресе
						const url = new URL(window.location.href);
						let t = url.searchParams.get('t');
						const sec = parseInt(t, 10);
						return isNaN(sec) ? 0 : sec;
					},

					async initPlayer() {
						this.loading = true;
						this.player = await VidstackPlayer.create({
							target: this.$refs.target,
							title: this.title,
							src: 'https://files.vidstack.io/sprite-fight/720p.mp4',
							poster: 'https://files.vidstack.io/sprite-fight/poster.webp',
							layout: new VidstackPlayerLayout({
								thumbnails: 'https://files.vidstack.io/sprite-fight/thumbnails.vtt',
							}),
							streamType: 'on-demand',
							logLevel: 'warn',
							playsInline: true,
							tracks: [
								{
									src: 'https://files.vidstack.io/sprite-fight/subs/english.vtt',
									label: 'English',
									language: 'en-US',
									kind: 'subtitles',
									type: 'vtt',
									default: true,
								},
								{
									src: 'https://files.vidstack.io/sprite-fight/chapters.vtt',
									language: 'en-US',
									kind: 'chapters',
									type: 'vtt',
									default: true,
								},
							],
						});

						this.muted = this.player.muted;
						this.player.addEventListener('volumechange', () => {
							this.muted = this.player.muted;
						});
						this.player.addEventListener('loadedmetadata', () => {
							this.duration = this.player.duration;
						});
						if (this.player.duration) {
							this.duration = this.player.duration;
						}

						// Скрываем лоадер после полной инициализации плеера или loadedmetadata
						let loadingCleared = false;
						const clearLoading = () => {
							if (!loadingCleared) {
								this.loading = false;
								loadingCleared = true;
							}
						};
						this.player.addEventListener('loadedmetadata', clearLoading);
						// Если метаданные уже загружены (например, кэш)
						if (this.player.duration) {
							clearLoading();
						}
						// Fallback: если loadedmetadata не пришёл за 2 секунды, всё равно показываем плеер
						setTimeout(clearLoading, 2000);

						// ГЛАВЫ: слушаем появление трека и cues
						const updateChapters = () => {
							const chaptersTrack = Array.from(this.player.textTracks || []).find(
								(t) => t.kind === 'chapters'
							);
							if (chaptersTrack) {
								chaptersTrack.mode = 'hidden';
								// Ждём cues асинхронно
								const tryUpdate = () => {
									if (chaptersTrack.cues && chaptersTrack.cues.length) {
										this.chapters = Array.from(chaptersTrack.cues).map((cue) => ({
											time: cue.startTime,
											label: cue.text,
										}));
										this.updateCurrentChapter(); // Важно: сразу обновить активную главу
									} else {
										setTimeout(tryUpdate, 200); // пробуем снова через 200мс
									}
								};
								tryUpdate();
							}
						};

						// Сразу пробуем, и если что — слушаем появление новых треков
						updateChapters();
						this.player.textTracks?.addEventListener?.('addtrack', updateChapters);

						// Локализация
						const layout = document.querySelector('media-video-layout');
						if (layout) layout.translations = this.RUSSIAN;

						this.player.addEventListener('timeupdate', this.updateCurrentChapter);
						this.player.addEventListener('seeked', this.updateCurrentChapter);
						this.player.addEventListener('play', this.updateCurrentChapter);

						// Антипиратские меры: отключаем контекстное меню, выделение, drag, скачивание
						const protectVideo = () => {
							// Находим внутренний <video> элемент
							const video = this.$refs.target.querySelector('video');
							if (video) {
								video.addEventListener('contextmenu', (e) => e.preventDefault());
								video.addEventListener('dragstart', (e) => e.preventDefault());
								video.addEventListener('selectstart', (e) => e.preventDefault());
								video.setAttribute('controlsList', 'nodownload noremoteplayback');
								video.setAttribute('disablePictureInPicture', '');
								video.setAttribute('oncontextmenu', 'return false;');
								video.style.userSelect = 'none';
								video.style.pointerEvents = '';
							}
						};
						// Ждём появления <video> через MutationObserver
						const observer = new MutationObserver(() => {
							protectVideo();
						});
						observer.observe(this.$refs.target, { childList: true, subtree: true });
						// Также пробуем сразу
						setTimeout(protectVideo, 500);

						// После инициализации плеера
						const seekToUrlTime = () => {
							const sec = this.getTimeFromUrl();
							if (sec > 0 && this.player) {
								this.player.currentTime = sec;
							}
						};
						// Ждём, пока duration будет известна
						if (this.player && this.player.duration) {
							seekToUrlTime();
						} else {
							const wait = setInterval(() => {
								if (this.player && this.player.duration) {
									seekToUrlTime();
									clearInterval(wait);
								}
							}, 200);
						}
					},
					play() {
						if (this.player) this.player.play();
					},
					pause() {
						if (this.player) this.player.pause();
					},
					toggleMute() {
						if (this.player) this.player.muted = !this.player.muted;
					},
					seekTo(time) {
						if (this.player) {
							this.player.currentTime = time;
							// Немного подождать, чтобы currentTime обновился, затем обновить главу
							setTimeout(this.updateCurrentChapter, 100);
						}
					},
					formatTime(sec) {
						const m = Math.floor(sec / 60);
						const s = Math.floor(sec % 60);
						return `${m}:${s.toString().padStart(2, '0')}`;
					},
					updateCurrentChapter() {
						if (!this.chapters.length || !this.player) {
							this.currentChapterIdx = -1;
							return;
						}
						const time = this.player.currentTime;
						let idx = -1;
						for (let i = 0; i < this.chapters.length; i++) {
							const start = this.chapters[i].time;
							const end = i < this.chapters.length - 1 ? this.chapters[i + 1].time : Infinity;
							if (time >= start && time < end) {
								idx = i;
								break;
							}
						}
						this.currentChapterIdx = idx;
					},
					startChapterRaf() {
						const loop = () => {
							this.updateCurrentChapter();
							this.rafId = requestAnimationFrame(loop);
						};
						this.rafId = requestAnimationFrame(loop);
					},
					stopChapterRaf() {
						if (this.rafId) {
							cancelAnimationFrame(this.rafId);
							this.rafId = null;
						}
					},
				},
				mounted() {
					this.initPlayer();
					this.startChapterRaf();
				},
				beforeUnmount() {
					this.stopChapterRaf();
					if (this.player) {
						this.player.removeEventListener('timeupdate', this.updateCurrentChapter);
						this.player.removeEventListener('seeked', this.updateCurrentChapter);
						this.player.removeEventListener('play', this.updateCurrentChapter);
						this.player.destroy();
					}
				},
				watch: {
					chapters() {
						this.updateCurrentChapter();
					},
				},
			},
		},
	}).mount('#app');
</script>
</section>
				<div class="mt-4"></div>
			</div>
			<div class="my-5"></div>
			<footer class="footer">
     <div class="main-section">
          <div class="footer__body">
               <div class="row g-4">
                    <div class="col-xl-3 col-md-6">
                         <nav class="menu-footer">
                              <div class="menu-footer__collapse">
                                   <a href="forms-of-documents.html" class="menu-footer__link">Аналитические материалы</a>
                                   <button class="menu-footer__button collapsed" data-bs-toggle="collapse" data-bs-target="#footer-forms-doc-collapse" aria-expanded="false" aria-current="true">
                                        <i class="bi bi-chevron-down"></i>
                                   </button>
                              </div>
                              <ul class="submenu-footer collapse" id="footer-forms-doc-collapse">
                                   <li><a href="#" class="submenu-footer__link">Организациям</a></li>
                                   <li><a href="#" class="submenu-footer__link">Индивидуальным предпринимателям</a></li>
                                   <li><a href="#" class="submenu-footer__link">Физическим лицам</a></li>
                              </ul>
                         </nav>
                    </div>
                    <div class="col-xl-3 col-md-6">
                         <nav class="menu-footer">
                              <div class="menu-footer__collapse">
                                   <a href="articles.html" class="menu-footer__link">Сервисы</a>
                              </div>
                         </nav>
                         <nav class="menu-footer mt-4 mt-xl-0">
                              <div class="menu-footer__collapse">
                                   <a href="articles.html" class="menu-footer__link">Формы документов</a>
                              </div>
                         </nav>
                         <nav class="menu-footer mt-4 mt-xl-0">
                              <div class="menu-footer__collapse">
                                   <a href="articles.html" class="menu-footer__link">Справочная информация</a>
                              </div>
                         </nav>
                    </div>
                    <div class="col-xl-3 col-md-6">
                         <nav class="menu-footer">
                              <div class="menu-footer__collapse">
                                   <a href="#" class="menu-footer__link">Информация о платформе</a>
                                   <button class="menu-footer__button collapsed" data-bs-toggle="collapse" data-bs-target="#footer-ref-info-collapse" aria-expanded="false" aria-current="true">
                                        <i class="bi bi-chevron-down"></i>
                                   </button>
                              </div>
                              <ul class="submenu-footer collapse" id="footer-ref-info-collapse">
                                   <li><a href="#" class="submenu-footer__link">Публичный договор</a></li>
                                   <li><a href="#" class="submenu-footer__link">Политика обработки cookies</a></li>
                                   <li><a href="#" class="submenu-footer__link">Политика обработки персональных данных</a></li>
                                   <li><a href="#" class="submenu-footer__link">Пользовательское соглашение</a></li>
                                   <li><a href="#" class="submenu-footer__link">Оплата доступа</a></li>
                              </ul>
                         </nav>
                    </div>
                    <div class="col-xl-3 col-md-6">
                         <nav class="menu-footer">
                              <div class="menu-footer__collapse">
                                   <div class="menu-footer__title">Контакты</div>
                                   <button class="menu-footer__button collapsed" data-bs-toggle="collapse" data-bs-target="#footer-contacts-collapse" aria-expanded="false" aria-current="true">
                                        <i class="bi bi-chevron-down"></i>
                                   </button>
                              </div>
                              <ul class="submenu-footer collapse" id="footer-contacts-collapse">
                                   <li>
                                        <a href="https://yandex.by/maps/157/minsk/?from=api-maps&amp;ll=27.574767%2C53.913305&amp;mode=poi&amp;poi%5Bpoint%5D=27.574228%2C53.913730&amp;poi%5Buri%5D=ymapsbm1%3A%2F%2Forg%3Foid%3D76571038512&amp;utm_source=api-maps&amp;z=18.18" class="submenu-footer__link d-flex flex-row" target="_blank">
                                             <i class="bi bi-geo-alt me-2"></i>
                                             <span>
                                                  г.Минск, пр-т. Машерова, 7
                                             </span>
                                        </a>
                                   </li>
                                   <li>
                                        <a href="mailto:info@info-center.by" class="submenu-footer__link">
                                             <i class="bi bi-envelope me-2"></i>
                                             info@info-center.by
                                        </a>
                                   </li>
                                   <li>
                                        <a href="tel:375172691903" class="submenu-footer__link">
                                             <i class="bi bi-telephone me-2"></i>
                                             +375 (17) 269 19 03
                                        </a>
                                   </li>
                                   <li>
                                        <div class="d-flex flex-row">
                                             <i class="bi bi-clock me-2"></i>
                                             <span>
                                                  Пн. – Чт.: с 8:45 до 18:00 <br>
                                                  Пт.: с 8:45 до 16:45
                                             </span>
                                        </div>
                                   </li>
                                   <li>
                                        <div class="d-flex flex-row">
                                             <i class="bi bi-list-ol me-2"></i>
                                             <span>
                                                  Регистрация №190819036 <br>
                                                  от 29.03.2007 Минским горисполкомом
                                             </span>
                                        </div>
                                   </li>
                              </ul>
                         </nav>
                    </div>
                    <div class="col-12">
                         <div class="footer__payments d-flex flex-row flex-wrap justify-content-between align-items-center">
                              <div class="footer__subscribe d-flex align-items-center my-2">
                                   <a href="#">ОФОРМИТЬ ДОСТУП К ЦИФРОВОЙ ПЛАТФОРМЕ<i class="bi bi-box-arrow-up-right ms-2"></i></a>
                              </div>
                              <div class="d-flex flex-row flex-wrap flex-md-wrap-no my-2">
                                   <span>Принимаем <br class="d-none d-md-block my-1"> к оплате:</span>
                                   <div class="row g-2 ms-lg-2 justify-content-start my-1">
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-1.png" alt="ipay">
                                             </div>
                                        </div>
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-2.png" alt="erip">
                                             </div>
                                        </div>
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-3.png" alt="mir">
                                             </div>
                                        </div>
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-4.png" alt="mastercard">
                                             </div>
                                        </div>
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-5.png" alt="visa">
                                             </div>
                                        </div>
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-6.png" alt="assist">
                                             </div>
                                        </div>
                                        <div class="col-md col-3 d-flex my-1">
                                             <div class="footer__payments-item">
                                                  <img src="./img/pay-logos/pay-logo-7.png" alt="belcart">
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <div class="footer-bottom border-0">
               <a href="main.html" class="footer-bottom__logo">Республиканское унитарное предприятие
                    «Информационно-издательский центр по налогам и сборам»</a>
               <div class="footer-bottom__copyright">© 2023 Все права защищены</div>
          </div>
     </div>
</footer>
		</div>
		<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>

<script
        src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/js/tempusdominus-bootstrap-4.min.js"></script>


<script src="js/script.min.js"></script>
	</body>
</html>
